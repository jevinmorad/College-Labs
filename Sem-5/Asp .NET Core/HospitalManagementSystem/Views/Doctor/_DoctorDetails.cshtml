@using HospitalManagementSystem.Utilities
@model Doctor

@if (Model != null)
{
    var statusClass = Model.IsActive ? "success" : "secondary";
    var statusIcon = Model.IsActive ? "bx-check-circle" : "bx-x-circle";
    var departmentName = Model.DoctorDepartments?.FirstOrDefault()?.Department?.DepartmentName ?? "N/A";

    <div>
        <div class="d-flex flex-column flex-md-row align-items-center">
            <img src="@(string.IsNullOrEmpty(Model.ProfilePhoto) ? "/images/default-profile.png" : Model.ProfilePhoto)"
                 alt="Profile Photo"
                 class="rounded-circle border border-3 border-primary mb-3 mb-md-0"
                 style="width: 120px; height: 120px; object-fit: cover;">

            <div class="ms-md-4 text-center text-md-start">
                <h3 class="mb-1">@Model.Name</h3>
                <p class="text-muted mb-2">@Model.Specialization</p>
                <span class="badge bg-label-@statusClass fs-6">
                    <i class="bx @statusIcon me-1"></i> @(Model.IsActive ? "Active" : "Inactive")
                </span>
            </div>
        </div>

        <hr class="my-4" />

        <div class="row">
            <div class="col-md-6">
                <h5 class="mb-3">Professional Details</h5>
                <div class="d-flex mb-2">
                    <i class='bx bxs-graduation me-3 text-muted fs-5'></i>
                    <span>@Model.Qualification</span>
                </div>
                <div class="d-flex mb-2">
                    <i class='bx bxs-building-house me-3 text-muted fs-5'></i>
                    <span>@departmentName</span>
                </div>
            </div>
            <div class="col-md-6">
                <h5 class="mb-3">Contact Information</h5>
                <div class="d-flex mb-2">
                    <i class='bx bx-envelope me-3 text-muted fs-5'></i>
                    <span>@Model.Email</span>
                </div>
                <div class="d-flex">
                    <i class='bx bx-phone me-3 text-muted fs-5'></i>
                    <span>@Model.Phone</span>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center border-top mt-4 pt-3">
            <small class="text-muted">
                Last updated: @Model.Modified.ToString("g")
            </small>
            <div>
                @* <a class="btn btn-primary" asp-controller="Doctor" asp-action="Edit" asp-route-id="@UrlEncryptor.Encrypt(Model.DoctorId.ToString())"> *@
                <a class="btn btn-primary" asp-controller="Doctor" asp-action="Edit" asp-route-id="Model.DoctorId">
                    <i class="bx bx-edit-alt me-1"></i> Edit
                </a>
            </div>
        </div>
    </div>
}