@using HospitalManagementSystem.Utilities
@model Patient

@if (Model != null)
{
    // C# logic to determine the style and icon for the patient's status
    var statusClass = Model.IsActive ? "success" : "secondary";
    var statusIcon = Model.IsActive ? "bx-check-circle" : "bx-x-circle";

    <div>
        <div class="d-flex flex-column flex-md-row align-items-center">
            <img src="@(string.IsNullOrEmpty(Model.ProfilePhoto) ? "/images/default-profile.png" : Model.ProfilePhoto)"
                 alt="Profile Photo"
                 class="rounded-circle border border-3 border-primary mb-3 mb-md-0"
                 style="width: 120px; height: 120px; object-fit: cover;">

            <div class="ms-md-4 text-center text-md-start">
                <h3 class="mb-1">@Model.Name</h3>
                <p class="text-muted mb-2">@Model.Email</p>
                <span class="badge bg-label-@statusClass fs-6">
                    <i class="bx @statusIcon me-1"></i> @(Model.IsActive ? "Active" : "Inactive")
                </span>
            </div>
        </div>

        <hr class="my-4" />

        <div class="row">
            <div class="col-md-6">
                <h5 class="mb-3">Contact Information</h5>
                <div class="d-flex mb-2">
                    <i class='bx bx-phone me-3 text-muted fs-5'></i>
                    <span>@Model.Phone</span>
                </div>
                <div class="d-flex mb-2">
                    <i class='bx bx-cake me-3 text-muted fs-5'></i>
                    <span>Born on @Model.DateOfBirth.ToString("dd MMMM yyyy")</span>
                </div>
                <div class="d-flex mb-2">
                    <i class='bx bx-user me-3 text-muted fs-5'></i>
                    <span>@Model.Gender</span>
                </div>
            </div>
            <div class="col-md-6">
                <h5 class="mb-3">Address</h5>
                <div class="d-flex">
                    <i class='bx bx-map-pin me-3 text-muted fs-5'></i>
                    <span>
                        @Model.Address<br />
                        @Model.City, @Model.State
                    </span>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center border-top mt-4 pt-3">
            <small class="text-muted">
                Last updated: @Model.Modified.ToString("g")
            </small>
            <div>
                <a class="btn btn-primary" asp-controller="Patient" asp-action="Edit" asp-route-id="@UrlEncryptor.Encrypt(Model.PatientID.ToString())">
                    <i class="bx bx-edit-alt me-1"></i> Edit
                </a>
            </div>
        </div>
    </div>
}